!function(U){"use strict";var e="ht",$=U[e],q=Math,k=q.max,D=q.min,f=q.abs,F=q.atan2,a=(q.cos,q.sin,q.ceil),W=$.Default,L=W.getInternal(),I=$.List,A=L.Mat,S=L.getNodeRect,t=L.intersectionLineRect,n=W.getDistance,B=W.setEdgeType,s="left",h="right",x="top",i="bottom",w="edge.type",H="edge.gap",J="edge.center",Z="edge.extend",N=function(r,s){return S(r,s).width},G=function(Q,M){return S(Q,M).height},u=function(d,g){return L.getEdgeAgentPosition(d,g._40I,g.s("edge.source.position"),g.s("edge.source.offset.x"),g.s("edge.source.offset.y"),g.s("edge.source.anchor.x"),g.s("edge.source.anchor.y"))},m=function(Y,E){return L.getEdgeAgentPosition(Y,E._41I,E.s("edge.target.position"),E.s("edge.target.offset.x"),E.s("edge.target.offset.y"),E.s("edge.target.anchor.x"),E.s("edge.target.anchor.y"))},X=function(z,M){var y=z.s(w),U=z.getEdgeGroup();if(U){var $=0;if(U.eachSiblingEdge(function(x){M.isVisible(x)&&x.s(w)==y&&$++}),$>1)return z.s(H)*($-1)/2}return 0},c=function(Q,N){var r=Q.s(w),X=Q.isLooped();if(!Q.getEdgeGroup())return X?Q.s(H):0;var o,j=0,E=0,m=0;return Q.getEdgeGroup().getSiblings().each(function(e){e.each(function(W){if(W._40I===Q._40I&&W.s(w)==r&&N.isVisible(W)){var g=W.s(H);o?(E+=m/2+g/2,m=g):(o=W,m=g),W===Q&&(j=E)}})}),X?E-j+m:j-E/2},y=function(U,p){var G=p.s("edge.corner.radius");return W.toRoundedCorner(U,G)};L.addMethod($.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),B("boundary",function(r,s,q,d){d||(s=-s);var V,l=u(q,r),D=m(q,r),E=S(q,r._40I),N=S(q,r._41I),c=new A(F(D.y-l.y,D.x-l.x)),R=n(l,D),h=l.x,f=l.y;return V=c.tf(0,s),l={x:V.x+h,y:V.y+f},V=c.tf(R,s),D={x:V.x+h,y:V.y+f},V=t(l,D,E),V&&(l={x:V[0],y:V[1]}),V=t(l,D,N),V&&(D={x:V[0],y:V[1]}),{points:new I([l,D])}}),B("ripple",function(C,l,f,V){V||(l=-l);var e=u(f,C),K=m(f,C),o=n(e,K),M=D(C.s("edge.offset"),o/2),Z=C.s("edge.ripple.size"),h=C.s("edge.ripple.length"),Y=C.s("edge.ripple.both"),i=C.s(J),S=C.s("edge.ripple.elevation"),G=new I,t=C.s("edge.ripple.straight")?null:new I,L=new A(F(K.y-e.y,K.x-e.x));V||(S=-S),o-=2*M,h>0&&(Z=a(o/h));var B=o/Z;t&&t.add(1);for(var T=0;Z>T;T++)t&&t.add(3),0===T?G.add({x:M+B*T,y:i?0:l}):G.add({x:M+B*T,y:l}),G.add({x:M+B*T+B/2,y:S+l}),Y&&(S=-S);for(G.add({x:M+o,y:i?0:l}),T=0;T<G.size();T++){var W=L.tf(G.get(T));W.x+=e.x,W.y+=e.y,G.set(T,W)}return{points:G,segments:t}}),B("h.v",function(p,U,V){U=c(p,V);var g=new I,Q=p.s(J),L=u(V,p),Y=L.x,n=L.y,D=m(V,p),K=D.x,B=D.y,r=0,d=0,s=K-Y,l=B-n;return Q||(r=N(V,p._40I)/2,d=G(V,p._41I)/2),s>=0&&0>=l?(g.add({x:Y+r,y:n+U}),g.add({x:K+U,y:n+U}),g.add({x:K+U,y:B+d})):0>=s&&l>=0?(g.add({x:Y-r,y:n+U}),g.add({x:K+U,y:n+U}),g.add({x:K+U,y:B-d})):s>=0&&l>=0?(g.add({x:Y+r,y:n+U}),g.add({x:K-U,y:n+U}),g.add({x:K-U,y:B-d})):(g.add({x:Y-r,y:n+U}),g.add({x:K-U,y:n+U}),g.add({x:K-U,y:B+d})),y(g,p)}),B("v.h",function(v,n,A){n=c(v,A);var j=new I,w=v.s(J),B=u(A,v),V=B.x,x=B.y,O=m(A,v),i=O.x,d=O.y,l=0,K=0,U=i-V,H=d-x;return w||(l=N(A,v._41I)/2,K=G(A,v._40I)/2),U>=0&&0>=H?(j.add({x:V+n,y:x-K}),j.add({x:V+n,y:d+n}),j.add({x:i-l,y:d+n})):0>=U&&H>=0?(j.add({x:V+n,y:x+K}),j.add({x:V+n,y:d+n}),j.add({x:i+l,y:d+n})):U>=0&&H>=0?(j.add({x:V-n,y:x+K}),j.add({x:V-n,y:d+n}),j.add({x:i-l,y:d+n})):(j.add({x:V-n,y:x-K}),j.add({x:V-n,y:d+n}),j.add({x:i+l,y:d+n})),y(j,v)}),B("ortho",function(z,D,R){var s=new I,L=z.s(J),b=z.s("edge.ortho"),M=z._40I,e=z._41I,o=u(R,z),X=o.x,A=o.y,Z=m(R,z),d=Z.x,t=Z.y,l=d-X,P=t-A,K=L?0:N(R,M)/2,Y=L?0:G(R,M)/2,i=L?0:N(R,e)/2,x=L?0:G(R,e)/2,h=(l-(K+i)*(l>0?1:-1))*b,k=(P-(Y+x)*(P>0?1:-1))*b;return f(l)<f(P)?l>=0&&0>=P?(s.add({x:X+D,y:A-Y}),s.add({x:X+D,y:A+k+D-Y}),s.add({x:d+D,y:A+k+D-Y}),s.add({x:d+D,y:t+x})):0>=l&&P>=0?(s.add({x:X+D,y:A+Y}),s.add({x:X+D,y:A+k+D+Y}),s.add({x:d+D,y:A+k+D+Y}),s.add({x:d+D,y:t-x})):l>=0&&P>=0?(s.add({x:X+D,y:A+Y}),s.add({x:X+D,y:A+k-D+Y}),s.add({x:d+D,y:A+k-D+Y}),s.add({x:d+D,y:t-x})):(s.add({x:X+D,y:A-Y}),s.add({x:X+D,y:A+k-D-Y}),s.add({x:d+D,y:A+k-D-Y}),s.add({x:d+D,y:t+x})):l>=0&&0>=P?(s.add({x:X+K,y:A+D}),s.add({x:X+h+D+K,y:A+D}),s.add({x:X+h+D+K,y:t+D}),s.add({x:d-i,y:t+D})):0>=l&&P>=0?(s.add({x:X-K,y:A+D}),s.add({x:X+h+D-K,y:A+D}),s.add({x:X+h+D-K,y:t+D}),s.add({x:d+i,y:t+D})):l>=0&&P>=0?(s.add({x:X+K,y:A+D}),s.add({x:X+h-D+K,y:A+D}),s.add({x:X+h-D+K,y:t+D}),s.add({x:d-i,y:t+D})):(s.add({x:X-K,y:A+D}),s.add({x:X+h-D-K,y:A+D}),s.add({x:X+h-D-K,y:t+D}),s.add({x:d+i,y:t+D})),y(s,z)}),B("flex",function(b,R,o){var v=new I,a=b.s("edge.flex")+X(b,o),S=b.s(J),i=b._40I,l=b._41I,B=u(o,b),w=B.x,Z=B.y,n=m(o,b),U=n.x,V=n.y,z=U-w,Y=V-Z,L=S?0:N(o,i)/2,D=S?0:G(o,i)/2,c=S?0:N(o,l)/2,_=S?0:G(o,l)/2,W=z>0?a:-a,K=Y>0?a:-a;return f(z)<f(Y)?z>=0&&0>=Y?(v.add({x:w+R,y:Z-D}),v.add({x:w+R,y:Z+K+R-D}),v.add({x:U+R,y:V-K+R+_}),v.add({x:U+R,y:V+_})):0>=z&&Y>=0?(v.add({x:w+R,y:Z+D}),v.add({x:w+R,y:Z+K+R+D}),v.add({x:U+R,y:V-K+R-_}),v.add({x:U+R,y:V-_})):z>=0&&Y>=0?(v.add({x:w+R,y:Z+D}),v.add({x:w+R,y:Z+K-R+D}),v.add({x:U+R,y:V-K-R-_}),v.add({x:U+R,y:V-_})):(v.add({x:w+R,y:Z-D}),v.add({x:w+R,y:Z+K-R-D}),v.add({x:U+R,y:V-K-R+_}),v.add({x:U+R,y:V+_})):z>=0&&0>=Y?(v.add({x:w+L,y:Z+R}),v.add({x:w+W+R+L,y:Z+R}),v.add({x:U-W+R-c,y:V+R}),v.add({x:U-c,y:V+R})):0>=z&&Y>=0?(v.add({x:w-L,y:Z+R}),v.add({x:w+W+R-L,y:Z+R}),v.add({x:U-W+R+c,y:V+R}),v.add({x:U+c,y:V+R})):z>=0&&Y>=0?(v.add({x:w+L,y:Z+R}),v.add({x:w+W-R+L,y:Z+R}),v.add({x:U-W-R-c,y:V+R}),v.add({x:U-c,y:V+R})):(v.add({x:w-L,y:Z+R}),v.add({x:w+W-R-L,y:Z+R}),v.add({x:U-W-R+c,y:V+R}),v.add({x:U+c,y:V+R})),y(v,b)}),B("extend.east",function(T,V,M){var x=new I,E=T.s(Z)+X(T,M),j=T.s(J),P=u(M,T),S=P.x+(j?0:N(M,T._40I)/2),t=P.y,W=m(M,T),q=W.x+(j?0:N(M,T._41I)/2),O=W.y,z=k(S,q)+E;return t>O?(x.add({x:S,y:t+V}),x.add({x:z+V,y:t+V}),x.add({x:z+V,y:O-V}),x.add({x:q,y:O-V})):(x.add({x:S,y:t-V}),x.add({x:z+V,y:t-V}),x.add({x:z+V,y:O+V}),x.add({x:q,y:O+V})),y(x,T)}),B("extend.west",function(B,z,O){var c=new I,d=B.s(Z)+X(B,O),W=B.s(J),o=u(O,B),j=o.x-(W?0:N(O,B._40I)/2),g=o.y,R=m(O,B),Q=R.x-(W?0:N(O,B._41I)/2),L=R.y,k=D(j,Q)-d;return g>L?(c.add({x:j,y:g+z}),c.add({x:k-z,y:g+z}),c.add({x:k-z,y:L-z}),c.add({x:Q,y:L-z})):(c.add({x:j,y:g-z}),c.add({x:k-z,y:g-z}),c.add({x:k-z,y:L+z}),c.add({x:Q,y:L+z})),y(c,B)}),B("extend.north",function(S,k,l){var Y=new I,z=S.s(Z)+X(S,l),W=S.s(J),i=u(l,S),b=i.x,A=i.y-(W?0:G(l,S._40I)/2),c=m(l,S),E=c.x,f=c.y-(W?0:G(l,S._41I)/2),N=D(A,f)-z;return b>E?(Y.add({y:A,x:b+k}),Y.add({y:N-k,x:b+k}),Y.add({y:N-k,x:E-k}),Y.add({y:f,x:E-k})):(Y.add({y:A,x:b-k}),Y.add({y:N-k,x:b-k}),Y.add({y:N-k,x:E+k}),Y.add({y:f,x:E+k})),y(Y,S)}),B("extend.south",function(g,U,M){var P=new I,L=g.s(Z)+X(g,M),S=g.s(J),_=u(M,g),r=_.x,Q=_.y+(S?0:G(M,g._40I)/2),R=m(M,g),e=R.x,V=R.y+(S?0:G(M,g._41I)/2),v=k(Q,V)+L;return r>e?(P.add({y:Q,x:r+U}),P.add({y:v+U,x:r+U}),P.add({y:v+U,x:e-U}),P.add({y:V,x:e-U})):(P.add({y:Q,x:r-U}),P.add({y:v+U,x:r-U}),P.add({y:v+U,x:e+U}),P.add({y:V,x:e+U})),y(P,g)});var b=function(U,$,t,J,f){if(J.sort(function(Y,R){var r=Y.getSourceAgent()===$?Y.getTargetAgent():Y.getSourceAgent(),O=R.getSourceAgent()===$?R.getTargetAgent():R.getSourceAgent(),T=r.p(),A=O.p();if(t===s||t===h){if(T.y>A.y)return 1;if(T.y<A.y)return-1}else{if(T.x>A.x)return 1;if(T.x<A.x)return-1}return W.sortFunc(Y.getId(),R.getId())}),f){for(var n,z,k,p=U.getSourceAgent(),v=U.getTargetAgent(),O=0;O<J.size();O++){var r=J.get(O);r.getSourceAgent()===p&&r.getTargetAgent()===v||r.getTargetAgent()===p&&r.getSourceAgent()===v?(z||(z=new I),z.add(r,0)):z?(k||(k=new I),k.add(r)):(n||(n=new I),n.add(r))}J.clear(),n&&J.addAll(n),z&&J.addAll(z),k&&J.addAll(k)}var m=J.indexOf(U),q=J.size(),y=U.s(H);return{side:t,index:m,size:q,offset:-y*(q-1)/2+y*m}},Q=function(A,H,h,u,S){var _=H.s(w);return b(H,h,u,h.getAgentEdges().toList(function(r){return A.isVisible(r)&&r.s(w)===_}),S)},l=function(o,z){var y=o.getSourceAgent()===z?o.getTargetAgent():o.getSourceAgent(),R=z.p(),m=y.p(),V=m.x-R.x,X=m.y-R.y;return V>0&&f(X)<=V?h:0>V&&f(X)<=-V?s:X>0&&f(V)<=X?i:x},O=function(E,S,y){var L=S.s(w),B=l(S,y);return b(S,y,B,y.getAgentEdges().toList(function(f){return E.isVisible(f)&&f.s(w)===L&&l(f,y)===B}))},o=function(W,L){var u=W.getSourceAgent()===L,V=u?W.getTargetAgent():W.getSourceAgent(),j=L.p(),Y=V.p();return u?j.y>Y.y?x:i:j.x<Y.x?h:s},z=function($,Y,N){var s=Y.s(w),p=o(Y,N);return b(Y,N,p,N.getAgentEdges().toList(function(z){return $.isVisible(z)&&z.s(w)===s&&o(z,N)===p}),p===h||p===i)},j=function(Z,Y){var U=Z.getSourceAgent()===Y,R=U?Z.getTargetAgent():Z.getSourceAgent(),j=Y.p(),I=R.p();return U?j.x<I.x?h:s:j.y>I.y?x:i},R=function(Z,U,T){var H=U.s(w),I=j(U,T);return b(U,T,I,T.getAgentEdges().toList(function(F){return Z.isVisible(F)&&F.s(w)===H&&j(F,T)===I}),I===h||I===i)},Y=function(Q,m,F){var R=Q.getSourceAgent(),S=Q.getTargetAgent(),d=R.getId()>S.getId(),V=d?S:R,q=d?R:S,U=V.p(),z=q.p(),c=F(m,Q,V),M=F(m,Q,q),p=Q.s(J),e=p?0:N(m,V)/2,k=p?0:N(m,q)/2,v=p?0:G(m,V)/2,g=p?0:G(m,q)/2,K=c.offset,P=M.offset,r=c.side,H=M.side,$=new I;return r===x?($.add({x:U.x+K,y:U.y-v}),$.add({x:U.x+K,y:z.y+P}),H===s?$.add({x:z.x-k,y:z.y+P}):$.add({x:z.x+k,y:z.y+P})):r===i?($.add({x:U.x+K,y:U.y+v}),$.add({x:U.x+K,y:z.y+P}),H===s?$.add({x:z.x-k,y:z.y+P}):$.add({x:z.x+k,y:z.y+P})):r===s?($.add({x:U.x-e,y:U.y+K}),$.add({x:z.x+P,y:U.y+K}),H===i?$.add({x:z.x+P,y:z.y+g}):$.add({x:z.x+P,y:z.y-g})):r===h&&($.add({x:U.x+e,y:U.y+K}),$.add({x:z.x+P,y:U.y+K}),H===i?$.add({x:z.x+P,y:z.y+g}):$.add({x:z.x+P,y:z.y-g})),d&&$.reverse(),y($,Q)};B("ortho2",function(X,k,V){var d,B,m=X.s(J),F=X.s("edge.ortho"),l=X.getSourceAgent(),b=X.getTargetAgent(),e=l.getId()>b.getId(),g=e?b:l,M=e?l:b,z=g.p(),r=M.p(),R=O(V,X,g),c=O(V,X,M),L=m?0:N(V,g)/2,P=m?0:G(V,g)/2,T=m?0:N(V,M)/2,a=m?0:G(V,M)/2,Q=new I,$=R.offset,t=c.offset,A=R.side;return A===h?(d=r.y>z.y?-$:$,B=z.x+L+(r.x-T-z.x-L)*F,Q.add({x:z.x+L,y:z.y+$}),Q.add({x:B+d,y:z.y+$}),Q.add({x:B+d,y:r.y+t}),Q.add({x:r.x-T,y:r.y+t})):A===s?(d=r.y>z.y?-$:$,B=z.x-L-(z.x-L-r.x-T)*F,Q.add({x:z.x-L,y:z.y+$}),Q.add({x:B-d,y:z.y+$}),Q.add({x:B-d,y:r.y+t}),Q.add({x:r.x+T,y:r.y+t})):A===i?(d=r.x>z.x?-$:$,B=z.y+P+(r.y-a-z.y-P)*F,Q.add({x:z.x+$,y:z.y+P}),Q.add({x:z.x+$,y:B+d}),Q.add({x:r.x+t,y:B+d}),Q.add({x:r.x+t,y:r.y-a})):A===x&&(d=r.x>z.x?-$:$,B=z.y-P-(z.y-P-r.y-a)*F,Q.add({x:z.x+$,y:z.y-P}),Q.add({x:z.x+$,y:B-d}),Q.add({x:r.x+t,y:B-d}),Q.add({x:r.x+t,y:r.y+a})),e&&Q.reverse(),y(Q,X)},!0),B("flex2",function(t,n,q){var L,k=t.getSourceAgent(),b=t.getTargetAgent(),f=k.getId()>b.getId(),c=f?b:k,V=f?k:b,m=c.p(),K=V.p(),g=O(q,t,c),E=O(q,t,V),Z=t.s(J),Q=t.s("edge.flex")+(g.size-1)/2*t.s(H),a=Z?0:N(q,c)/2,R=Z?0:G(q,c)/2,e=Z?0:N(q,V)/2,X=Z?0:G(q,V)/2,B=new I,T=g.offset,j=E.offset,P=g.side;return P===h?(L=K.y>m.y?-T:T,B.add({x:m.x+a,y:m.y+T}),B.add({x:m.x+a+Q+L,y:m.y+T}),B.add({x:K.x-e-Q+L,y:K.y+j}),B.add({x:K.x-e,y:K.y+j})):P===s?(L=K.y>m.y?-T:T,B.add({x:m.x-a,y:m.y+T}),B.add({x:m.x-a-Q-L,y:m.y+T}),B.add({x:K.x+e+Q-L,y:K.y+j}),B.add({x:K.x+e,y:K.y+j})):P===i?(L=K.x>m.x?-T:T,B.add({x:m.x+T,y:m.y+R}),B.add({x:m.x+T,y:m.y+R+Q+L}),B.add({x:K.x+j,y:K.y-X-Q+L}),B.add({x:K.x+j,y:K.y-X})):P===x&&(L=K.x>m.x?-T:T,B.add({x:m.x+T,y:m.y-R}),B.add({x:m.x+T,y:m.y-R-Q-L}),B.add({x:K.x+j,y:K.y+X+Q-L}),B.add({x:K.x+j,y:K.y+X})),f&&B.reverse(),y(B,t)},!0),B("extend.north2",function(f,_,v){var S=f.getSourceAgent(),p=f.getTargetAgent(),O=S.getId()>p.getId(),M=O?p:S,X=O?S:p,E=M.p(),h=X.p(),c=Q(v,f,M,x),P=Q(v,f,X,x,!0),Y=f.s(J),W=Y?0:G(v,M)/2,z=Y?0:G(v,X)/2,L=c.offset,T=P.offset,s=f.s(Z)+(c.size-1)/2*f.s(H),C=D(E.y-W,h.y-z)-s+(E.x<h.x?L:-L),a=new I;return a.add({x:E.x+L,y:E.y-W}),a.add({x:E.x+L,y:C}),a.add({x:h.x+T,y:C}),a.add({x:h.x+T,y:h.y-z}),O&&a.reverse(),y(a,f)},!0),B("extend.south2",function(E,a,h){var Y=E.getSourceAgent(),o=E.getTargetAgent(),V=Y.getId()>o.getId(),F=V?o:Y,s=V?Y:o,X=F.p(),D=s.p(),S=Q(h,E,F,i),R=Q(h,E,s,i,!0),P=E.s(J),g=P?0:G(h,F)/2,u=P?0:G(h,s)/2,j=S.offset,v=R.offset,z=E.s(Z)+(S.size-1)/2*E.s(H),$=k(X.y+g,D.y+u)+z+(X.x>D.x?j:-j),A=new I;return A.add({x:X.x+j,y:X.y+g}),A.add({x:X.x+j,y:$}),A.add({x:D.x+v,y:$}),A.add({x:D.x+v,y:D.y+u}),V&&A.reverse(),y(A,E)},!0),B("extend.west2",function(L,V,B){var o=L.getSourceAgent(),g=L.getTargetAgent(),z=o.getId()>g.getId(),Y=z?g:o,k=z?o:g,e=Y.p(),_=k.p(),v=Q(B,L,Y,x),E=Q(B,L,k,x,!0),h=L.s(J),R=h?0:N(B,Y)/2,M=h?0:N(B,k)/2,w=v.offset,P=E.offset,j=L.s(Z)+(v.size-1)/2*L.s(H),t=D(e.x-R,_.x-M)-j+(e.y<_.y?w:-w),G=new I;return G.add({x:e.x-R,y:e.y+w}),G.add({x:t,y:e.y+w}),G.add({x:t,y:_.y+P}),G.add({x:_.x-M,y:_.y+P}),z&&G.reverse(),y(G,L)},!0),B("extend.east2",function(U,C,c){var A=U.getSourceAgent(),i=U.getTargetAgent(),L=A.getId()>i.getId(),m=L?i:A,t=L?A:i,v=m.p(),O=t.p(),V=Q(c,U,m,x),o=Q(c,U,t,x,!0),P=U.s(J),W=P?0:N(c,m)/2,D=P?0:N(c,t)/2,z=V.offset,n=o.offset,K=U.s(Z)+(V.size-1)/2*U.s(H),T=k(v.x+W,O.x+D)+K+(v.y>O.y?z:-z),l=new I;return l.add({x:v.x+W,y:v.y+z}),l.add({x:T,y:v.y+z}),l.add({x:T,y:O.y+n}),l.add({x:O.x+D,y:O.y+n}),L&&l.reverse(),y(l,U)},!0),B("v.h2",function(T,S,d){return Y(T,d,z)},!0),B("h.v2",function(r,C,u){return Y(r,u,R)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);