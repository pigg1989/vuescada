!function(g,G,y){"use strict";var X="ht",s=g[X],Q=null,w=Math,k=w.PI,Y=w.cos,N=w.sin,L=w.abs,U=w.max,o=w.sqrt,K=1e-5,E=s.Default,i=E.def,Z=E.startAnim,V=E.createMatrix,T=E.transformVec,n=E.getInternal(),l=n.addMethod,p=n.superCall,J=n.toPointsArray,I=n.createNormals,m=n.toFloatArray,R=n.glMV,d=n.batchShape,t=n.createNodeMatrix,P=n.getFaceInfo,q=n.transformAppend,f=n.drawFaceInfo,A=n.createAnim,h=n.cube(),$=h.is,H=h.vs,r=h.uv,e=n.ui(),F=s.Node,M=s.Shape,C="h",j="v",b="front",z="back",v="left",a="right",B="top",O="bottom",D="dw.expanded",x=".expanded",W="dw.angle",c=".angle",u=function(Z,H,D){i(X+"."+Z,H,D)},_=function(_,u,V){V?_.push(u.x,u.y):_.push(u.x,u.y,u.z)},S=[1,0,0],ir=function(k,B,s,Y){var C,U,F,h,z=0,T=[];if(Y)for(C=Y.length;C>z;z+=3)U=Y[z],F=Y[z+1],h=Y[z+2],T.push(new pq([new Ef([B[3*U],B[3*U+1],B[3*U+2]],S,s?[s[2*U],s[2*U+1],0]:Q),new Ef([B[3*F],B[3*F+1],B[3*F+2]],S,s?[s[2*F],s[2*F+1],0]:Q),new Ef([B[3*h],B[3*h+1],B[3*h+2]],S,s?[s[2*h],s[2*h+1],0]:Q)],k));else for(C=B.length;C>z;z+=3)U=z,F=z+1,h=z+2,T.push(new pq([new Ef([B[3*U],B[3*U+1],B[3*U+2]],S,s?[s[2*U],s[2*U+1],0]:Q),new Ef([B[3*F],B[3*F+1],B[3*F+2]],S,s?[s[2*F],s[2*F+1],0]:Q),new Ef([B[3*h],B[3*h+1],B[3*h+2]],S,s?[s[2*h],s[2*h+1],0]:Q)],k));return T},cj=[v,b,a,z,B,O],Pr=cj.concat("csg"),Ak=[0,6,12,18,24,30],ii=function(c,D,U){for(var K=t(c),A=[],O=0;6>O;O++)for(var f=cj[O],N=Ak[O],p=U?D.getFaceUv(c,f):Q,e=U?D.getFaceUvScale(c,f):Q,X=U?D.getFaceUvOffset(c,f):Q,g=0;2>g;g++){var j,o,y,J=$[N+3*g],h=$[N+3*g+1],s=$[N+3*g+2];if(U){if(p){var l=8*O;j=[p[2*J-l],p[2*J+1-l],0],o=[p[2*h-l],p[2*h+1-l],0],y=[p[2*s-l],p[2*s+1-l],0]}else j=[r[2*J],r[2*J+1],0],o=[r[2*h],r[2*h+1],0],y=[r[2*s],r[2*s+1],0];e&&(j[0]*=e[0],j[1]*=e[1],o[0]*=e[0],o[1]*=e[1],y[0]*=e[0],y[1]*=e[1]),X&&(j[0]+=X[0],j[1]+=X[1],o[0]+=X[0],o[1]+=X[1],y[0]+=X[0],y[1]+=X[1])}A.push(new pq([new Ef(T([H[3*J],H[3*J+1],H[3*J+2]],K),S,j),new Ef(T([H[3*h],H[3*h+1],H[3*h+2]],K),S,o),new Ef(T([H[3*s],H[3*s+1],H[3*s+2]],K),S,y)],c))}return xe.$15n(A)},Nf=function(f,t){var g,e=f.data.getAttaches();if(e&&e.each(function(t){t instanceof vg&&t.s("attach.operation")&&(g||(g=[]),g.push(t))}),g){var k;cj.forEach(function(u){var Z=ir(u,f[u].vs,f[u].tuv);k=k?k.concat(Z):Z}),k=xe.$15n(k),g.forEach(function(s){var q=s.s("attach.operation");k[q]&&(k=k[q](ii(s,f.gv,f.csg.tuv)))}),cj.forEach(function(k){k=f[k],k.vs=[],k.tuv&&(k.tuv=[])}),k.$19n().forEach(function(Q){var T=Q.$10n;if(T instanceof vg){if(T.s("attach.cull"))return;T="csg"}for(var g=f[T],X=g.vs,o=g.tuv,U=Q.$9n,b=2;b<U.length;b++)_(X,U[0].$24n),_(X,U[b-1].$24n),_(X,U[b].$24n),o&&(_(o,U[0].uv,!0),_(o,U[b-1].uv,!0),_(o,U[b].uv,!0))})}Pr.forEach(function(W){var P=f[W];P.visible&&P.vs.length?(P.ns=I(P.vs),m(P,"vs"),m(P,"tuv")):delete f[W]}),t&&(d(f,Q,t),f.clear())};l(E,{createFrameModel:function(Z,J,u,z){Z=Z==Q?.07:Z,J=J==Q?Z:J,u=u==Q?Z:u,z=z?z:{};var D=z.top,y=z.bottom,W=z.left,l=z.right,S=z.front,X=z.back,p=[],g=[];return S===!0?(p.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),g.push(0,0,0,1,1,1,1,1,1,0,0,0)):S===!1||(p.push(-.5,.5,.5,-.5,-.5,.5,-.5+Z,-.5,.5,-.5+Z,-.5,.5,-.5+Z,.5,.5,-.5,.5,.5,.5-Z,.5,.5,.5-Z,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-Z,.5,.5,-.5+Z,.5,.5,-.5+Z,.5-J,.5,.5-Z,.5-J,.5,.5-Z,.5-J,.5,.5-Z,.5,.5,-.5+Z,.5,.5,-.5+Z,-.5+J,.5,-.5+Z,-.5,.5,.5-Z,-.5,.5,.5-Z,-.5,.5,.5-Z,-.5+J,.5,-.5+Z,-.5+J,.5),g.push(0,0,0,1,Z,1,Z,1,Z,0,0,0,1-Z,0,1-Z,1,1,1,1,1,1,0,1-Z,0,Z,0,Z,J,1-Z,J,1-Z,J,1-Z,0,Z,0,Z,1-J,Z,1,1-Z,1,1-Z,1,1-Z,1-J,Z,1-J)),X===!0?(p.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),g.push(1,0,0,1,1,1,0,1,1,0,0,0)):X===!1||(p.push(-.5,.5,-.5,-.5+Z,-.5,-.5,-.5,-.5,-.5,-.5+Z,-.5,-.5,-.5,.5,-.5,-.5+Z,.5,-.5,.5-Z,.5,-.5,.5,-.5,-.5,.5-Z,-.5,-.5,.5,-.5,-.5,.5-Z,.5,-.5,.5,.5,-.5,-.5+Z,.5,-.5,.5-Z,.5-J,-.5,-.5+Z,.5-J,-.5,.5-Z,.5-J,-.5,-.5+Z,.5,-.5,.5-Z,.5,-.5,-.5+Z,-.5+J,-.5,.5-Z,-.5,-.5,-.5+Z,-.5,-.5,.5-Z,-.5,-.5,-.5+Z,-.5+J,-.5,.5-Z,-.5+J,-.5),g.push(1,0,1-Z,1,1,1,1-Z,1,1,0,1-Z,0,Z,0,0,1,Z,1,0,1,Z,0,0,0,1-Z,0,Z,J,1-Z,J,Z,J,1-Z,0,Z,0,1-Z,1-J,Z,1,1-Z,1,Z,1,1-Z,1-J,Z,1-J)),W===!0?(p.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),g.push(0,0,0,1,1,1,1,1,1,0,0,0)):W===!1||(p.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+u,-.5,-.5,-.5+u,-.5,.5,-.5+u,-.5,.5,-.5,-.5,.5,.5-u,-.5,-.5,.5-u,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-u,-.5,.5,-.5+u,-.5,.5-J,-.5+u,-.5,.5-J,.5-u,-.5,.5-J,.5-u,-.5,.5,.5-u,-.5,.5,-.5+u,-.5,-.5+J,-.5+u,-.5,-.5,-.5+u,-.5,-.5,.5-u,-.5,-.5,.5-u,-.5,-.5+J,.5-u,-.5,-.5+J,-.5+u),g.push(0,0,0,1,u,1,u,1,u,0,0,0,1-u,0,1-u,1,1,1,1,1,1,0,1-u,0,u,0,u,J,1-u,J,1-u,J,1-u,0,u,0,u,1-J,u,1,1-u,1,1-u,1,1-u,1-J,u,1-J)),l===!0?(p.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),g.push(1,0,0,1,1,1,0,1,1,0,0,0)):l===!1||(p.push(.5,.5,-.5,.5,-.5,-.5+u,.5,-.5,-.5,.5,-.5,-.5+u,.5,.5,-.5,.5,.5,-.5+u,.5,.5,.5-u,.5,-.5,.5,.5,-.5,.5-u,.5,-.5,.5,.5,.5,.5-u,.5,.5,.5,.5,.5,-.5+u,.5,.5-J,.5-u,.5,.5-J,-.5+u,.5,.5-J,.5-u,.5,.5,-.5+u,.5,.5,.5-u,.5,-.5+J,-.5+u,.5,-.5,.5-u,.5,-.5,-.5+u,.5,-.5,.5-u,.5,-.5+J,-.5+u,.5,-.5+J,.5-u),g.push(1,0,1-u,1,1,1,1-u,1,1,0,1-u,0,u,0,0,1,u,1,0,1,u,0,0,0,1-u,0,u,J,1-u,J,u,J,1-u,0,u,0,1-u,1-J,u,1,1-u,1,u,1,1-u,1-J,u,1-J)),D===!0?(p.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),g.push(1,1,1,0,0,0,0,0,0,1,1,1)):D===!1||(p.push(.5,.5,.5,.5,.5,-.5,.5-Z,.5,-.5,.5-Z,.5,-.5,.5-Z,.5,.5,.5,.5,.5,-.5+Z,.5,.5,-.5+Z,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+Z,.5,.5,.5-Z,.5,.5,.5-Z,.5,.5-u,-.5+Z,.5,.5-u,-.5+Z,.5,.5-u,-.5+Z,.5,.5,.5-Z,.5,.5,.5-Z,.5,-.5+u,.5-Z,.5,-.5,-.5+Z,.5,-.5,-.5+Z,.5,-.5,-.5+Z,.5,-.5+u,.5-Z,.5,-.5+u),g.push(1,1,1,0,1-Z,0,1-Z,0,1-Z,1,1,1,Z,1,Z,0,0,0,0,0,0,1,Z,1,1-Z,1,1-Z,1-u,Z,1-u,Z,1-u,Z,1,1-Z,1,1-Z,u,1-Z,0,Z,0,Z,0,Z,u,1-Z,u)),y===!0?(p.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),g.push(1,0,0,1,1,1,0,1,1,0,0,0)):y===!1||(p.push(.5,-.5,.5,.5-Z,-.5,-.5,.5,-.5,-.5,.5-Z,-.5,-.5,.5,-.5,.5,.5-Z,-.5,.5,-.5+Z,-.5,.5,-.5,-.5,-.5,-.5+Z,-.5,-.5,-.5,-.5,-.5,-.5+Z,-.5,.5,-.5,-.5,.5,.5-Z,-.5,.5,-.5+Z,-.5,.5-u,.5-Z,-.5,.5-u,-.5+Z,-.5,.5-u,.5-Z,-.5,.5,-.5+Z,-.5,.5,.5-Z,-.5,-.5+u,-.5+Z,-.5,-.5,.5-Z,-.5,-.5,-.5+Z,-.5,-.5,.5-Z,-.5,-.5+u,-.5+Z,-.5,-.5+u),g.push(1,0,1-Z,1,1,1,1-Z,1,1,0,1-Z,0,Z,0,0,1,Z,1,0,1,Z,0,0,0,1-Z,0,Z,u,1-Z,u,Z,u,1-Z,0,Z,0,1-Z,1-u,Z,1,1-Z,1,Z,1,1-Z,1-u,Z,1-u)),{vs:p,uv:g}}}),l(s.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":y,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":k/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),cj.forEach(function(C){var g={};g[C+x]=!1,g[C+".toggleable"]=!1,g[C+".axis"]=v,g[C+".start"]=0,g[C+".end"]=k/2,g[C+c]=0,l(s.Style,g,!0)});var xe=function(){this.$4n=[]};xe.$15n=function(T){var B=new xe;return B.$4n=T,B},xe.prototype={clone:function(){var x=new xe;return x.$4n=this.$4n.map(function(R){return R.clone()}),x},$19n:function(){return this.$4n},union:function(W){var D=new Xh(this.clone().$4n),P=new Xh(W.clone().$4n);return D.$3n(P),P.$3n(D),P.$6n(),P.$3n(D),P.$6n(),D.$7n(P.$2n()),xe.$15n(D.$2n())},subtract:function(X){var Y=new Xh(this.clone().$4n),Q=new Xh(X.clone().$4n);return Y.$6n(),Y.$3n(Q),Q.$3n(Y),Q.$6n(),Q.$3n(Y),Q.$6n(),Y.$7n(Q.$2n()),Y.$6n(),xe.$15n(Y.$2n())},intersect:function(J){var o=new Xh(this.clone().$4n),w=new Xh(J.clone().$4n);return o.$6n(),w.$3n(o),w.$6n(),o.$3n(w),w.$3n(o),o.$7n(w.$2n()),o.$6n(),xe.$15n(o.$2n())},inverse:function(){var f=this.clone();return f.$4n.map(function(_){_.flip()}),f}},xe.cube=function(v){v=v||{};var r=new vr(v.center||[0,0,0]),h=v.radius?v.radius.length?v.radius:[v.radius,v.radius,v.radius]:[1,1,1];return xe.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(d){return new pq(d[0].map(function(q){var g=new vr(r.x+h[0]*(2*!!(1&q)-1),r.y+h[1]*(2*!!(2&q)-1),r.z+h[2]*(2*!!(4&q)-1));return new Ef(g,new vr(d[1]))}))}))},xe.sphere=function(i){function p(z,K){z*=2*k,K*=k;var p=new vr(Y(z)*N(K),Y(K),N(z)*N(K));D.push(new Ef(R.$20n(p.$21n(G)),p))}i=i||{};for(var D,R=new vr(i.center||[0,0,0]),G=i.radius||1,T=i.slices||16,g=i.stacks||8,K=[],j=0;T>j;j++)for(var z=0;g>z;z++)D=[],p(j/T,z/g),z>0&&p((j+1)/T,z/g),g-1>z&&p((j+1)/T,(z+1)/g),p(j/T,(z+1)/g),K.push(new pq(D));return xe.$15n(K)},xe.cylinder=function(K){function F(d,D,U){var r=2*D*k,c=n.$21n(Y(r)).$20n(B.$21n(N(r))),v=j.$20n(E.$21n(d)).$20n(c.$21n(G)),Q=c.$21n(1-L(U)).$20n(V.$21n(U));return new Ef(v,Q)}K=K||{};for(var j=new vr(K.start||[0,-1,0]),C=new vr(K.end||[0,1,0]),E=C.$13n(j),G=K.radius||1,q=K.slices||16,V=E.$14n(),l=L(V.y)>.5,n=new vr(l,!l,0).$12n(V).$14n(),B=n.$12n(V).$14n(),v=new Ef(j,V.$11n()),Z=new Ef(C,V.$14n()),T=[],Q=0;q>Q;Q++){var x=Q/q,b=(Q+1)/q;T.push(new pq([v,F(0,x,-1),F(0,b,-1)])),T.push(new pq([F(0,b,0),F(0,x,0),F(1,x,0),F(1,b,0)])),T.push(new pq([Z,F(1,b,1),F(1,x,1)]))}return xe.$15n(T)};var vr=function(R,g,W){var P=this;3==arguments.length?(P.x=R,P.y=g,P.z=W):"x"in R?(P.x=R.x,P.y=R.y,P.z=R.z):(P.x=R[0],P.y=R[1],P.z=R[2])};vr.prototype={clone:function(){return new vr(this.x,this.y,this.z)},$11n:function(){return new vr(-this.x,-this.y,-this.z)},$20n:function(J){return new vr(this.x+J.x,this.y+J.y,this.z+J.z)},$13n:function(t){return new vr(this.x-t.x,this.y-t.y,this.z-t.z)},$21n:function(n){return new vr(this.x*n,this.y*n,this.z*n)},$16n:function(F){return new vr(this.x/F,this.y/F,this.z/F)},$23n:function(Q){return this.x*Q.x+this.y*Q.y+this.z*Q.z},lerp:function(K,_){return this.$20n(K.$13n(this).$21n(_))},length:function(){return o(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(B){var w=this;return new vr(w.y*B.z-w.z*B.y,w.z*B.x-w.x*B.z,w.x*B.y-w.y*B.x)}};var Ef=function(v,U,s){var M=this;M.$24n=new vr(v),M.$22n=new vr(U),M.uv=s?new vr(s):null};Ef.prototype={clone:function(){var j=this;return new Ef(j.$24n.clone(),j.$22n.clone(),j.uv?j.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function($,i){var x=this;return new Ef(x.$24n.lerp($.$24n,i),x.$22n.lerp($.$22n,i),x.uv?x.uv.lerp($.uv,i):null)}};var Xb=function(e,n){this.$22n=e,this.w=n};Xb.$17n=function(F,g,b){var V=g.$13n(F).$12n(b.$13n(F)).$14n();return new Xb(V,V.$23n(F))},Xb.prototype={clone:function(){return new Xb(this.$22n.clone(),this.w)},flip:function(){var A=this;A.$22n=A.$22n.$11n(),A.w=-A.w},$5n:function(Q,i,A,C,P){for(var b=this,Y=0,O=1,q=2,X=3,k=0,y=[],u=0;u<Q.$9n.length;u++){var V=b.$22n.$23n(Q.$9n[u].$24n)-b.w,L=-K>V?q:V>K?O:Y;k|=L,y.push(L)}switch(k){case Y:(b.$22n.$23n(Q.$8n.$22n)>0?i:A).push(Q);break;case O:C.push(Q);break;case q:P.push(Q);break;case X:for(var H=[],z=[],u=0;u<Q.$9n.length;u++){var B=(u+1)%Q.$9n.length,G=y[u],R=y[B],p=Q.$9n[u],T=Q.$9n[B];if(G!=q&&H.push(p),G!=O&&z.push(G!=q?p.clone():p),(G|R)==X){var V=(b.w-this.$22n.$23n(p.$24n))/b.$22n.$23n(T.$24n.$13n(p.$24n)),m=p.$18n(T,V);H.push(m),z.push(m.clone())}}H.length>=3&&C.push(new pq(H,Q.$10n)),z.length>=3&&P.push(new pq(z,Q.$10n))}}};var pq=function(B,V){var R=this;R.$9n=B,R.$10n=V,R.$8n=Xb.$17n(B[0].$24n,B[1].$24n,B[2].$24n)};pq.prototype={clone:function(){var n=this.$9n.map(function(W){return W.clone()});return new pq(n,this.$10n)},flip:function(){this.$9n.reverse().map(function(Y){Y.flip()}),this.$8n.flip()}};var Xh=function(v){var R=this;R.$8n=null,R.front=null,R.back=null,R.$4n=[],v&&R.$7n(v)};Xh.prototype={clone:function(){var e=this,W=new Xh;return W.$8n=e.$8n&&e.$8n.clone(),W.front=e.front&&e.front.clone(),W.back=e.back&&e.back.clone(),W.$4n=e.$4n.map(function(x){return x.clone()}),W},$6n:function(){for(var C=this,Y=0;Y<C.$4n.length;Y++)C.$4n[Y].flip();C.$8n.flip(),C.front&&C.front.$6n(),C.back&&C.back.$6n();var g=C.front;C.front=C.back,C.back=g},$1n:function(V){var J=this;if(!J.$8n)return V.slice();for(var b=[],Q=[],K=0;K<V.length;K++)J.$8n.$5n(V[K],b,Q,b,Q);return J.front&&(b=J.front.$1n(b)),Q=J.back?J.back.$1n(Q):[],b.concat(Q)},$3n:function(B){var C=this;C.$4n=B.$1n(C.$4n),C.front&&C.front.$3n(B),C.back&&C.back.$3n(B)},$2n:function(){var G=this,V=G.$4n.slice();return G.front&&(V=V.concat(G.front.$2n())),G.back&&(V=V.concat(G.back.$2n())),V},$7n:function(F){var I=this;if(F.length){I.$8n||(I.$8n=F[0].$8n.clone());for(var M=[],v=[],P=0;P<F.length;P++)this.$8n.$5n(F[P],I.$4n,I.$4n,M,v);M.length&&(I.front||(I.front=new Xh),this.front.$7n(M)),v.length&&(I.back||(I.back=new Xh),I.back.$7n(v))}}};var _n="symbol",gq=s.Symbol=function(m,x,j){var f=this;p(gq,f),f.s3(20,20,20),f.s({"all.visible":!1,shape:"rect"}),f.setIcon(m,x,j)};u("Symbol",F,{setIcon:function(A,D,M){var u,p=this;return gq.superClass.setIcon.call(p,A),A?(u={for3d:!0,face:"center",position:44,names:[A]},M&&(u.transaprent=!0),D&&(u.autorotate=D),p.addStyleIcon(_n,u)):p.removeStyleIcon(_n),p.setWidth(n.getImageWidth(E.getImage(A),p)||20),u}});var vg=s.CSGNode=function(){p(vg,this),this.s({shape:"rect","attach.thickness":1.001})},Ho={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};u("CSGNode",F,{_22Q:function(){return im},onPropertyChanged:function(i){var H=this,Y=H.getHost();vg.superClass.onPropertyChanged.call(H,i),Ho[i.property]&&(Y instanceof mj||Y instanceof vg)&&Y.fp("csgNodeChange",!0,!1)}});var im=function(y,w){p(im,this,[y,w])};i(im,e.Node3dUI,{_80o:function(V,a,n){var t=this;t._shape3d?im.superClass._80o.call(t,V,a,n):(R(t.gv),Pr.forEach(function(W){f(t,V,a,t[W],n)}))},validate:function(w,a){var G=this,S=G.gv,i=G.data;if(i.s("shape3d"))return im.superClass.validate.call(G,w,a),G._shape3d=!0,void 0;G._shape3d=!1;var N=t(i,S.getMat(i)),k=w&&w.uv;G.vf2("csg",k);for(var p=0;6>p;p++)for(var B=cj[p],K=Ak[p],_=G.vf2(B,k,a),L=_.mat||N,E=_.vs,e=_.uv,f=_.tuv,J=0;2>J;J++){var d=$[K+3*J],O=$[K+3*J+1],Q=$[K+3*J+2];if(q(E,L,[H[3*d],H[3*d+1],H[3*d+2]]),q(E,L,[H[3*O],H[3*O+1],H[3*O+2]]),q(E,L,[H[3*Q],H[3*Q+1],H[3*Q+2]]),f)if(e){var m=8*p;f.push(e[2*d-m],e[2*d+1-m],e[2*O-m],e[2*O+1-m],e[2*Q-m],e[2*Q+1-m])}else f.push(r[2*d],r[2*d+1],r[2*O],r[2*O+1],r[2*Q],r[2*Q+1])}Nf(G,w,a)},vf2:function(y,p,S){var s,b=this,G=b.gv.getFaceVisible(b.data,y);return s=P(b,y,S),s.vs=[],s.tuv=G&&(s.texture||p)?[]:Q,s.visible=G,s}});var mj=s.CSGShape=function(){var r=this;p(mj,r),r.s({"shape.background":Q,"shape.border.width":8}),r.setTall(240),r.setElevation(120),r.setThickness(14)};u("CSGShape",M,{IRotatable:!1,_22Q:function(){return xh},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var xh=function(m,T){p(xh,this,[m,T])};i(xh,e.Shape3dUI,{_80o:function(K,m,j){var n=this;n.undrawable||(R(n.gv),Pr.forEach(function(X){f(n,K,m,n[X],j)}))},validate:function(G,y){var c=this,b=c.data,S=b.getPoints();if(c.undrawable=S.size()<2)return c.clear(),void 0;var d=b.isClosePath(),R=U(b._thickness/2,K),W=J(S,Q,Q,d);Pr.forEach(function(E){c.vf(E,G&&G.uv,!0,y)}),d&&(c.left.visible=!1,c.right.visible=!1),c._12O(W,R),c._20Q(W),Nf(c,G,y)}});var Le=s.DoorWindow=function(){var d=this;p(Le,d),d.setElevation(100),d.s3(100,200,14)};u("DoorWindow",vg,{IDoorWindow:!0,toggle:function(_){this.setExpanded(!this.s(D),_)},isExpanded:function(){return this.s(D)},setExpanded:function(P,I){var q=this,J=q.$25n,b=q.getDataModel(),f=q.s(D);if(J&&(J.stop(!0),delete q.$25n),f!==P){b&&b.beginTransaction();var O=P?q.s("dw.end"):q.s("dw.start");q.s(D,P),I=A(I),I?(f=q.s(W),I.action=function(E){q.s(W,f+(O-f)*E)},I.finishFunc=function(){b&&b.endTransaction()},q.$25n=Z(I)):(q.s(W,O),b&&b.endTransaction())}},getMat:function(){var q=this,Y=q.s("dw.s3"),u=q.s("dw.t3"),R=q.s("dw.flip"),i=q.s(W);if(Y||i||u||R){var X=[];if(R&&X.push({r3:[0,k,0]}),Y&&X.push({s3:Y}),i){Y=q.s3();var Z=q.s("dw.axis"),P=Y[0]/2,G=Y[1]/2;Y[2]/2,Z===v?X.push({t3:[P,0,0]},{r3:[0,-i,0]},{t3:[-P,0,0]}):Z===a?X.push({t3:[-P,0,0]},{r3:[0,i,0]},{t3:[P,0,0]}):Z===B?X.push({t3:[0,-G,0]},{r3:[-i,0,0]},{t3:[0,G,0]}):Z===O?X.push({t3:[0,G,0]},{r3:[i,0,0]},{t3:[0,-G,0]}):Z===j?X.push({r3:[0,i,0]}):Z===C&&X.push({r3:[i,0,0]})}return u&&X.push({t3:u}),V(X)}return Q}});var Al=s.CSGBox=function(){var s=this;p(Al,s),s.setElevation(100),s.s3(100,200,100)};u("CSGBox",vg,{ICSGBox:!0,toggleFace:function(P,p){this.setFaceExpanded(P,!this.s(P+x),p)},isFaceExpanded:function(C){return this.s(C+x)},setFaceExpanded:function(C,n,j){var e=this,v=e.$25n,I=e.s(C+x);if(v&&(v.stop(!0),delete e.$25n),I!==n){var g=n?e.s(C+".end"):e.s(C+".start");e.s(C+x,n),j=A(j),j?(I=e.s(C+c),j.action=function(f){e.s(C+c,I+(g-I)*f)},e.$25n=Z(j)):e.s(C+c,g)}},getFaceMat:function(_){var r=this,A=r.s(_+c);if(!A)return Q;var L=r.s(_+".axis"),w=r.s3(),P=w[0]/2,f=w[1]/2,H=w[2]/2,K=[];return _===b&&(L===v?K.push({t3:[P,0,-H]},{r3:[0,-A,0]},{t3:[-P,0,H]}):L===a?K.push({t3:[-P,0,-H]},{r3:[0,A,0]},{t3:[P,0,H]}):L===B?K.push({t3:[0,-f,-H]},{r3:[-A,0,0]},{t3:[0,f,H]}):L===O?K.push({t3:[0,f,-H]},{r3:[A,0,0]},{t3:[0,-f,H]}):L===j?K.push({t3:[0,0,-H]},{r3:[0,A,0]},{t3:[0,0,H]}):L===C&&K.push({t3:[0,0,-H]},{r3:[A,0,0]},{t3:[0,0,H]})),_===z&&(L===v?K.push({t3:[-P,0,H]},{r3:[0,-A,0]},{t3:[P,0,-H]}):L===a?K.push({t3:[P,0,H]},{r3:[0,A,0]},{t3:[-P,0,-H]}):L===B?K.push({t3:[0,-f,H]},{r3:[A,0,0]},{t3:[0,f,-H]}):L===O?K.push({t3:[0,f,H]},{r3:[-A,0,0]},{t3:[0,-f,-H]}):L===j?K.push({t3:[0,0,H]},{r3:[0,A,0]},{t3:[0,0,-H]}):L===C&&K.push({t3:[0,0,H]},{r3:[A,0,0]},{t3:[0,0,-H]})),_===v&&(L===v?K.push({t3:[P,0,H]},{r3:[0,-A,0]},{t3:[-P,0,-H]}):L===a?K.push({t3:[P,0,-H]},{r3:[0,A,0]},{t3:[-P,0,H]}):L===B?K.push({t3:[P,-f,0]},{r3:[0,0,-A]},{t3:[-P,f,0]}):L===O?K.push({t3:[P,f,0]},{r3:[0,0,A]},{t3:[-P,-f,0]}):L===j?K.push({t3:[P,0,0]},{r3:[0,A,0]},{t3:[-P,0,0]}):L===C&&K.push({t3:[P,0,0]},{r3:[0,0,A]},{t3:[-P,0,0]})),_===a&&(L===v?K.push({t3:[-P,0,-H]},{r3:[0,-A,0]},{t3:[P,0,H]}):L===a?K.push({t3:[-P,0,H]},{r3:[0,A,0]},{t3:[P,0,-H]}):L===B?K.push({t3:[-P,-f,0]},{r3:[0,0,A]},{t3:[P,f,0]}):L===O?K.push({t3:[-P,f,0]},{r3:[0,0,-A]},{t3:[P,-f,0]}):L===j?K.push({t3:[-P,0,0]},{r3:[0,A,0]},{t3:[P,0,0]}):L===C&&K.push({t3:[-P,0,0]},{r3:[0,0,A]},{t3:[P,0,0]})),_===B&&(L===v?K.push({t3:[P,-f,0]},{r3:[0,0,A]},{t3:[-P,f,0]}):L===a?K.push({t3:[-P,-f,0]},{r3:[0,0,-A]},{t3:[P,f,0]}):L===B?K.push({t3:[0,-f,H]},{r3:[-A,0,0]},{t3:[0,f,-H]}):L===O?K.push({t3:[0,-f,-H]},{r3:[A,0,0]},{t3:[0,f,H]}):L===j?K.push({t3:[0,-f,0]},{r3:[0,0,A]},{t3:[0,f,0]}):L===C&&K.push({t3:[0,-f,0]},{r3:[A,0,0]},{t3:[0,f,0]})),_===O&&(L===v?K.push({t3:[P,f,0]},{r3:[0,0,-A]},{t3:[-P,-f,0]}):L===a?K.push({t3:[-P,f,0]},{r3:[0,0,A]},{t3:[P,-f,0]}):L===B?K.push({t3:[0,f,-H]},{r3:[-A,0,0]},{t3:[0,-f,H]}):L===O?K.push({t3:[0,f,H]},{r3:[A,0,0]},{t3:[0,-f,-H]}):L===j?K.push({t3:[0,f,0]},{r3:[0,0,A]},{t3:[0,-f,0]}):L===C&&K.push({t3:[0,f,0]},{r3:[A,0,0]},{t3:[0,-f,0]})),V(K)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);