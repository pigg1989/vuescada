!function(w,z){"use strict";var q="position",T="absolute",S="relative",H="px",L="left",k="right",g="top",$="bottom",i="display",f="none",x="block",K=ht.Default,d=K.getInternal(),Y=Math.floor,O=Math.ceil,N=Math.PI,v=null,E=w.parseInt,y=function(h){return h.getContext("2d")},t=function(){return document},J=function(z){return t().createElement(z)},j=function(){return J("canvas")},M=function(t,W,u){t.style.setProperty(W,u,v)},B=function(L,s,h){K.def(ht.widget[L],s,h)},r=function(T,I){T.appendChild(I)},W=function(o,N){o.removeChild(N)},F=K.eventListenerOptionsFalse,Z=(K.eventListenerOptionsTrue,function(M,Q,w,o){M.addEventListener(Q,w,o?F:F)}),C=function(W,Q,V,g){W.removeEventListener(Q,V,g?F:F)};ht.widget.RulerFrame=function(Q){var u=this,V=u._view=d.createView(null,u),m=u.$1k=j(),F=u.$2k=j(),o=u.$3k=j(),$=u.$4k=j();u._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},u._topRulerConfig={visible:!0},u._rightRulerConfig={visible:!1},u._bottomRulerConfig={visible:!1},u._leftRulerConfig={visible:!0},r(V,m),r(V,o),r(V,F),r(V,$),M(V,q,S),M(V,"box-sizing","border-box"),M(V,"-moz-box-sizing","border-box"),M(m,q,T),M(F,q,T),M(o,q,T),M($,q,T),u.$14k=function(){u.$13k=1,u.iv()},u.$15k=function(G){if(u._topRulerConfig.guideVisible||u._rightRulerConfig.guideVisible||u._bottomRulerConfig.guideVisible||u._leftRulerConfig.guideVisible||u._defaultRulerConfig.guideVisible||(u._topRulerConfig.guideTipVisible||u._rightRulerConfig.guideTipVisible||u._bottomRulerConfig.guideTipVisible||u._leftRulerConfig.guideTipVisible||u._defaultRulerConfig.guideTipVisible)&&u._component){var H=V.getBoundingClientRect();u.$16k={x:G.clientX-H.left,y:G.clientY-H.top},u.$5k()}},u.setComponent(Q)},B("RulerFrame",z,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(L){var s=this,N=s._component,G=s.getView();if(G){if(s._component=L,s.fp("component",N,L),N){var n=s.getComponentView(N);W(G,n),C(G,"mousemove",s.$15k),s.removeComponentPropertyChangeListener(N,s.$14k)}if(L){var Y=s.getComponentView(L);r(G,Y),M(Y,q,T),Z(G,"mousemove",s.$15k),s.addComponentPropertyChangeListener(L,s.$14k)}}},addComponentPropertyChangeListener:function(c,I){c&&c.mp&&c.mp(I)},removeComponentPropertyChangeListener:function(y,w){y&&y.ump&&y.ump(w)},getComponentHZoom:function(_){return _&&_.getZoom?_.getZoom():1},getComponentVZoom:function(j){return j&&j.getZoom?j.getZoom():1},getComponentViewRect:function(W){return W&&W.getViewRect?W.getViewRect():void 0},getComponentView:function(A){return A&&A.getView?A.getView():A},invalidateComponent:function(o){o&&o.iv&&o.iv()},validateComponent:function(N){N&&N.validate&&N.validate()},$7k:function(s,r,Y,b,t,O,u,U,P,j,T,S){if(r.visible){var g=this._defaultRulerConfig,K="borderStyle",o="borderColor",F="borderWidth",z="background",c=r[K]||g[K],L=r[o]||g[o],W=r[F]||g[F],h=r.size!=v?r.size:g.size,R=r[z]||g[z],B=h+W,Q=this.$6k(W,c,L,s,Y,t,B,u,U,P,j,T,S);M(s,t,"0px"),O?d.setCanvas(s,b-Q,h):d.setCanvas(s,h,b-Q),M(s,"background",R),M(s,i,x)}else M(s,i,f),M(this.getComponentView(this._component),t,"0px")},$6k:function(S,v,Q,B,R,w,V,y,J,p,n,s,d){var O=0;return M(B,R,S+"px "+v+" "+Q),M(this.getComponentView(this._component),w,V+H),y?(M(B,J,p+H),O+=p):M(B,J,"0px"),n?(M(B,s,d+H),O+=d):M(B,s,"0px"),O},validateImpl:function(){var Z=this,X=Z._component,J=Z.$1k,x=Z.$2k,z=Z.$3k,l=Z.$4k,e=Z._view,W=Z._defaultRulerConfig,A=Z._topRulerConfig,b=Z._rightRulerConfig,T=Z._bottomRulerConfig,r=Z._leftRulerConfig,n=W.size;if(e&&X){var K=A.size!=v?A.size:n,u=b.size!=v?b.size:n,p=T.size!=v?T.size:n,_=r.size!=v?r.size:n;Z.$7k(J,A,"border-bottom",e.offsetWidth,g,!0,r.visible,L,_,b.visible,k,u),Z.$7k(x,b,"border-left",e.offsetHeight,k,!1,A.visible,g,K,T.visible,$,p),Z.$7k(z,T,"border-top",e.offsetWidth,$,!0,r.visible,L,_,b.visible,k,u),Z.$7k(l,r,"border-right",e.offsetHeight,L,!1,A.visible,g,K,T.visible,$,p),Z.$13k?delete Z.$13k:Z.invalidateComponent(X),Z.validateComponent(X),Z.$5k()}},$5k:function(){function K(D,K,O,X,n,m){if(K.visible){var T=y(D),w=K[b]||Q,P=K[k]!=v?K[k]:J,M=K[g]||o,L=K[Y]||_,R=K.size!=v?K.size:A,Cc=K[Z]||f,we=K[N]||U,Vc=K[B]||h,Qf=K[G]!=v?K[G]:j,hq=K[u]!=v?K[u]:l,$m=K[x]!=v?K[x]:I,_e=K[i]!=v?K[i]:a,_h=K[s]!=v?K[s]:e,xm=K[H]!=v?K[H]:C,Fq=K[t]||dc,yg=K[p]||Be;P&&(w=$[m]=$.$8k($[m]||w,K[q]||S,K[V]||r,X?F:c,we)),O.call($,T,W,d,E,z,R,X?F:c,w,M,L,n,Cc,Vc);var lf=$.$16k;(Qf||hq)&&lf&&(X?$.$9k(T,lf.x,R,Fq,yg,Qf,hq,$m,_e,_h,xm):$.$10k(T,lf.y,R,Fq,yg,Qf,hq,$m,_e,_h,xm,n))}}var $=this,n=$.$1k,m=$.$2k,O=$.$3k,P=$.$4k,R=$._topRulerConfig,X=$._rightRulerConfig,T=$._bottomRulerConfig,w=$._leftRulerConfig,D=$._defaultRulerConfig,M=$._component,L=$.getComponentViewRect(M),F=$.getComponentHZoom(M),c=$.getComponentVZoom(M),W=L.x*F,E=W+L.width*F,d=L.y*c,z=d+L.height*c,A=$._defaultRulerConfig.size,b="defaultMajorTickSpacing",q="maxPhysicalMajorTickSpacing",V="minPhysicalMajorTickSpacing",k="tickSpacingAdaptable",g="majorTickTextFont",Y="majorTickTextColor",Z="majorTickColor",B="minorTickColor",G="guideVisible",u="guideTipVisible",x="guideTipBorderColor",i="guideTipTextColor",s="guideTipTextFont",H="guideTipBackground",t="guideColor",p="guideWidth",N="minMajorTickSpacing",Q=D[b],S=D[q],r=D[V],J=D[k],o=D[g],_=D[Y],f=D[Z],U=D[N],h=D[B],j=D[G],l=D[u],I=D[x],a=D[i],e=D[s],C=D[H],dc=D[t],Be=D[p];$._view&&M&&(K(n,R,$.$11k,!0,!1,"_currentTopMajorTickSpacing"),K(m,X,$.$12k,!1,!0,"_currentRightMajorTickSpacing"),K(O,T,$.$11k,!0,!0,"_currentBottomMajorTickSpacing"),K(P,w,$.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(F,U,P,l,T){return P>F*l?F=Y(U/l/T)*T:F*l>U&&(F=O(P/l/T)*T),F},getHTipText:function(t){var o=this,r=o._component,h=0,u=o._view.getBoundingClientRect();return r.lp?h=E(r.lp({x:t.x+u.left,y:t.y}).x):h-=E(this.getComponentView(r).style.left)||0,h},$9k:function(F,X,N,J,l,Y,A,$,t,I,i){var b=this,S=b._component;F.save(),d.translateAndScale(F,0,0,1);var p=X-(E(this.getComponentView(S).style.left)||0),k=0;if(X=b.getHTipText(b.$16k),Y&&(F.beginPath(),F.fillStyle=J,F.rect(p,k,l,N),F.fill()),A){F.beginPath(),F.textAlign="center",F.textBaseline="middle",F.font=I;var j=F.measureText(X).width+6;F.fillStyle=i,F.rect(p-j/2,k,j,N),F.fill(),F.strokeStyle=$,F.stroke(),F.beginPath(),F.fillStyle=t,F.fillText(X,p,k+N/2)}F.restore()},getVTipText:function(w){var C=this,m=C._component,L=0,X=C._view.getBoundingClientRect();return m.lp?L=E(m.lp({x:w.x,y:w.y+X.top}).y):L-=E(this.getComponentView(m).style.top)||0,L},formatScaleText:function(z){return Math.round(z)},$10k:function(v,u,Z,e,c,L,o,D,g,G,A,$){var q=this,O=q._component;v.save(),d.translateAndScale(v,0,0,1);var k=Z/2,C=u-(E(this.getComponentView(O).style.top)||0);if(u=q.getVTipText(q.$16k),L&&(v.beginPath(),v.fillStyle=e,v.rect(k-Z/2,C,Z,c),v.fill()),o){v.translate(k,C),v.rotate(($?90:-90)*N/180),v.translate(-k,-C),v.beginPath(),v.textAlign="center",v.textBaseline="middle",v.font=G;var F=v.measureText(u).width+6;v.fillStyle=A,v.rect(k-F/2,C-Z/2,F,Z),v.fill(),v.strokeStyle=D,v.stroke(),v.fillStyle=g,v.fillText(u,k,C)}v.restore()},$11k:function(k,e,A,I,Z,h,F,R,M,C,m,z,b){k.save(),A=0;var p=e,v=I,_=(p+v)/2;e=0,I=v-p,d.translateAndScale(k,0,0,1);var B=0,U=0,t=E(h/2),T=h-t,l=m?0:t,L=R*F,o=L/10;e-=L,I+=L,k.clearRect(e,0,I-e,h),k.beginPath(),k.fillStyle=b;var D=Y(_/o)*o-p;for(B=D;I>B;B+=o)k.rect(B,A+l,1,T);for(B=D;B>e;B-=o)k.rect(B,A+l,1,T);for(k.fill(),l=m?0:1,k.beginPath(),k.fillStyle=z,D=Y(_/L)*L-p,B=D;I>B;B+=L)k.rect(B,A+l,1,h-1);for(B=D;B>e;B-=L)k.rect(B,A+l,1,h-1);k.fill();var s=E(/\d+px/.exec(M)[0]),c=(s||10)/2;k.textBaseline="middle",l=m?h-c-2:c+2,k.beginPath(),k.fillStyle=C,k.font=M;var V=Y(_/L)*L/F;for(B=D,U=V;I>B;B+=L,U+=R){var x=this.getHScaleText?this.getHScaleText(B):U;k.fillText(this.formatScaleText(x),B+2,A+l)}for(B=D,U=V;B>e;B-=L,U-=R){var x=this.getHScaleText?this.getHScaleText(B):U;k.fillText(this.formatScaleText(x),B+2,A+l)}k.restore()},$12k:function(O,v,_,C,H,a,U,e,j,h,B,J,P){function l(B,a,R,V,n,p){n=W.getVScaleText?W.getVScaleText(R):n,n=W.formatScaleText(n),O.translate(B+a,R),O.rotate(-V),O.translate(-B-a,-R),O.fillText(n,B+a+(p?2:1),R),O.translate(B+a,R),O.rotate(V),O.translate(-B-a,-R)}O.save(),v=0;var R=_,c=H,X=(R+c)/2;_=0,H=c-R,d.translateAndScale(O,0,0,1);var T=0,W=this,I=0,V=E(a/2),m=a-V,F=B?0:V,y=e*U,r=y/10;_-=y,H+=y,O.clearRect(v,0,a,H-_),O.beginPath(),O.fillStyle=P;var G=Y(X/r)*r-R;for(T=G;H>T;T+=r)O.rect(v+F,T,m,1);for(T=G;T>_;T-=r)O.rect(v+F,T,m,1);for(O.fill(),F=B?0:1,O.beginPath(),O.fillStyle=J,G=Y(X/y)*y-R,T=G;H>T;T+=y)O.rect(v+F,T,a-1,1);for(T=G;T>_;T-=y)O.rect(v+F,T,a-1,1);O.fill();var k=E(/\d+px/.exec(j)[0]),q=(k||10)/2,Q=90*N/180;O.textBaseline="middle",F=B?a-q:q+2,Q=B?-Q:Q,O.beginPath(),O.fillStyle=h,O.font=j;var D=Y(X/y)*y/U;for(T=G,I=D;H>T;T+=y,I+=e)l(v,F,T,Q,I,B);for(T=G,I=D;T>_;T-=y,I-=e)l(v,F,T,Q,I,B);O.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var t=this,p=t._component,X=t._view;p&&t.removeComponentPropertyChangeListener(p,t.$14k),X&&(C(X,"mousemove",t.$15k),W(X.parentNode,X),t._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);