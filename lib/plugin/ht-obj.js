!function(K,e,f){"use strict";var s="ht",R=K[s],b=null,C=Math,j=C.abs,y=C.max,M=Number.MAX_VALUE,q=R.Default,_=q.getInternal(),P=q.clone,S=_.vec3TransformMat4,B=_.appendArray,E=function(){var K=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,e=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,v=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,g=function(Q,p){return p=parseInt(p),p>=0?Q[p-1]:Q[p+Q.length]},D=function(T,Y,D,z,V,a){if(T.vs){var _=g(Y,z),R=g(Y,V),r=g(Y,a),J=D.matrix,m=T.vs;if(D.flipFace){var k=R;R=r,r=k}J?(B(m,S(P(_),J)),B(m,S(P(R),J)),B(m,S(P(r),J))):(B(m,_),B(m,R),B(m,r))}},s=function(S,k,y,C,N,O){if(S.vs){var s=g(k,C),t=g(k,N),M=g(k,O),Q=y.flipY;if(y.flipFace){var o=t;t=M,M=o}S.uv.push(s[0],Q?1-s[1]:s[1],t[0],Q?1-t[1]:t[1],M[0],Q?1-M[1]:M[1])}},G=function(H,b,E,V,m,J){if(H.vs){var T=g(b,V),C=g(b,m),A=g(b,J),X=E.normalMatrix,v=H.ns;if(E.flipFace){var z=C;C=A,A=z}X?(B(v,S(P(T),X)),B(v,S(P(C),X)),B(v,S(P(A),X))):(B(v,T),B(v,C),B(v,A))}},A=function(j,z,q,B,w,t,E,S){var N=B&&B.length&&S;t[3]===f?(D(j,z,w,t[0],t[1],t[2]),E&&s(j,q,w,E[0],E[1],E[2]),N&&G(j,B,w,S[0],S[1],S[2])):(D(j,z,w,t[0],t[1],t[3]),D(j,z,w,t[1],t[2],t[3]),E&&(s(j,q,w,E[0],E[1],E[3]),s(j,q,w,E[1],E[2],E[3])),N&&(G(j,B,w,S[0],S[1],S[3]),G(j,B,w,S[1],S[2],S[3])))},X=function(C,f,c,g){var v,i,e,V,F,u,r,X=M,K=M,d=M,G=-M,k=-M,l=-M;for(v in C)for(u=C[v].vs,r=u.length,i=0;r>i;i+=3)e=u[i+0],V=u[i+1],F=u[i+2],X>e&&(X=e),K>V&&(K=V),d>F&&(d=F),e>G&&(G=e),V>k&&(k=V),F>l&&(l=F);if(c){var A=X+(G-X)/2,n=K+(k-K)/2,J=d+(l-d)/2;for(v in C)for(u=C[v].vs,r=u.length,i=0;r>i;i+=3)u[i+0]-=A,u[i+1]-=n,u[i+2]-=J}var m,R,D;c?(m=G-X,R=k-K,D=l-d):(m=2*y(j(X),j(G)),R=2*y(j(K),j(k)),D=2*y(j(d),j(l))),0===m&&(m=Math.min(R,D)/1e3||.001),0===R&&(R=Math.min(m,D)/1e3||.001),0===D&&(D=Math.min(m,R)/1e3||.001),g.rawS3=[m,R,D];for(v in C){if(u=C[v].vs,f)for(r=u.length,i=0;r>i;i+=3)m&&(u[i+0]/=m),R&&(u[i+1]/=R),D&&(u[i+2]/=D);C[v].rawS3=g.rawS3}};return function(W,t,I){if(!W)return b;(_.isString(t)||t instanceof ArrayBuffer)&&(t=O(t)),I||(I={}),I.flipY==b&&(I.flipY=!0),(I.s3||I.r3||I.t3||I.mat)&&(I.matrix=_.createWorldMatrix(I.mat,I.s3,I.r3,I.rotationMode,I.t3));var y,z,g,p,Y,U,J=[],G=[],R=I.ignoreNormal?b:[],N=I.reverseFlipMtls,V={vs:[],uv:[],ns:R?[]:b},S={htdefault:V},Z=new n(W);for(R&&I.matrix&&(I.normalMatrix=_.createNormalMatrix(I.matrix));null!=(z=Z.stepNext());)if(z=z.trim(),0!==z.length&&"#"!==z.charAt(0))if(z.indexOf("#QNAN0")>=0&&(z=z.replace(/#QNAN0/gi,"0")),g=K.exec(z))J.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);else if(g=e.exec(z))G.push([parseFloat(g[1]),parseFloat(g[2])]);else if(R&&(g=v.exec(z)))I.flipFace?R.push([parseFloat(-g[1]),parseFloat(-g[2]),parseFloat(-g[3])]):R.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);else if("f"===z[0]){var u=z.split(/\s+/);if(u.length<4)continue;var k,y,d,x=[],a=[],B=[];for(y=1,d=u.length;d>y;y++)k=u[y].split("/"),x.push(parseInt(k[0],10)),k.length>1&&k[1].length>0&&B.push(parseInt(k[1],10)),k.length>2&&k[2].length>0&&a.push(parseInt(k[2],10));for(y=0,d=x.length-2;d>y;y++)A(V,J,G,R,I,[x[0],x[y+1],x[y+2]],B.length?[B[0],B[y+1],B[y+2]]:b,a.length?[a[0],a[y+1],a[y+2]]:b)}else if(/^usemtl /.test(z)&&(p=z.substring(7).trim(),!(V=S[p]))){if(V={name:p,vs:[],uv:[],ns:R?[]:b},I.ignoreMtls&&I.ignoreMtls.indexOf(p)>=0&&delete V.vs,(I.reverseFlip||"*"===N||N&&N.indexOf(p)>=0)&&(V.reverseFlip=!0),t&&(Y=t[p],Y&&(I.ignoreColor||(V.color=Y.kd),!I.ignoreTransparent&&Y.d>0&&Y.d<1&&(V.transparent=!0,V.opacity=Y.d),!I.ignoreImage&&(U=Y.map_kd)))){U=U.split(" ");var D=-1;for(y=0;y<U.length;y++)"-o"===U[y]?(V.uvOffset=[parseFloat(U[y+1]),parseFloat(U[y+2])],y+=3,D=y):"-s"===U[y]&&(V.uvScale=[parseFloat(U[y+1]),parseFloat(U[y+2])],y+=3,D=y);V.image=(I.prefix||"")+U.splice(D+1).join(" ")}S[p]=V}var H=[];for(var s in S){var w=S[s].vs;w&&0!==w.length||H.push(s)}H.forEach(function(g){delete S[g]}),X(S,I.cube,I.center,I);var P=I.shape3d;if(P){var $=[];for(var p in S){var V=S[p];$.rawS3=V.rawS3,$.push(V)}q.setShape3dModel(P,$)}return S}}(),O=function(M){var H={};if(M)for(var Y,c,b,i,x,L,I=new n(M),g=/\s+/;null!=(c=I.stepNext());)c=c.trim(),0!==c.length&&"#"!==c.charAt(0)&&(b=c.indexOf(" "),i=(b?c.substring(0,b):c).toLowerCase(),x=(b?c.substring(b+1):"").trim(),"newmtl"===i?H[x]=Y={name:x}:Y&&("ka"===i||"kd"===i||"ks"===i?(L=x.split(g,3),Y[i]=[parseFloat(L[0]),parseFloat(L[1]),parseFloat(L[2]),1]):Y[i]="ns"===i||"d"===i?parseFloat(x):x));return H},n=function(J){var A=this;if(J instanceof ArrayBuffer){A.isBuffer=!0;var z=0,$=new Uint8Array(J),G=$.length,Z=$.length;A.stepNext=function(){for(var q,v,B=z;G>z;)if(q=$[z],v=q>>4,12===v||13==v)z+=2;else if(14===v)z+=3;else if(z++,10===q)return String.fromCharCode.apply(null,$.subarray(B,z));return z>B?String.fromCharCode.apply(null,$.subarray(B,z)):null}}else{A.isBuffer=!1;var K=J.split("\n"),m=0,Z=K.length;A.stepNext=function(){return Z>m?K[m++]:null}}};n.prototype={},n.prototype.constructor=n,_.addMethod(q,{loadObj:function(y,Z,F){F=F||{};var Y=!1;/(MSIE |Trident\/|Edge\/)/.test(K.navigator.userAgent)&&(Y=!0);var $=function(A){var p,C=F.finishFunc,v=F.shape3d,d=A?E(A[0],A[1],F):null;if(d){if(v)p=q.getShape3dModel(v);else{p=[];for(var b in d){var R=d[b];p.rawS3=R.rawS3,p.push(R)}}C&&C(d,p,p.rawS3)}else C&&C(null)};if(Y){var W=function(Q){F.responseType="arraybuffer",q.xhrLoad(y,function(k){$([k,Q])},F)};Z?q.xhrLoad(Z,function(c){W(c)},F):W()}else q.xhrLoad(Z?[y,Z]:[y],$,F)},parseObj:function(c,K,z){return E(c,K,z)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);