!function(N,T){"use strict";var m="ht",E=m+".graph.",j=N[m],J=j.graph,I=j.Default,B=j.Color,g=null,c="px",F=I.getInternal(),y=F.getPinchDist,A=I.preventDefault,p=I.getTouchCount,x=I.startDragging;F.addMethod(I,{overviewBackground:B.widgetBackground,overviewMaskBackground:B.transparent,overviewContentBorderColor:B.widgetBorder,overviewContentBackground:B.background},!0),J.Overview=function(x){var P=this,w=P._view=F.createView(1,P);P._canvas=F.createCanvas(w),w.style.background=I.overviewBackground,w.appendChild(P._mask=F.createDiv()),P.setGraphView(x),P.addListeners()},I.def(E+"Overview",T,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:I.overviewMaskBackground,_contentBorderColor:I.overviewContentBorderColor,_contentBackground:I.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(u){var z=this;if(z.gv!==u){var s=z.gv;z.gv=u,s&&(s.removeViewListener(z.handleGraphViewChanged,z),s.ump(z.handleGraphViewPropertyChanged,z)),u&&(u.addViewListener(z.handleGraphViewChanged,z),u.mp(z.handleGraphViewPropertyChanged,z)),z.fp("graphView",s,u),z.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(H){this._autoUpdate&&"validate"===H.kind&&this.redraw()},handleGraphViewPropertyChanged:function(e){("canvasBackground"===e.property||this.getFixToRect()&&("zoom"===e.property||"translateX"===e.property||"translateY"===e.property))&&this.redraw()},redraw:function(){var t=this;t._redraw||(t._redraw=1,t.iv(50))},validateImpl:function(){var z=this,E=z.gv,s=z._canvas,Y=z.getWidth(),n=z.getHeight(),P=z._redraw;if(E){var w=z._mask,o=w.style,a=E.getViewRect(),G=this.getFixToRect(),p=G?"boolean"==typeof G?E.getContentRect():G:E.getScrollRect(),m=p.x,k=p.y,H=p.width,u=p.height,$=z._rate=Math.max(H/Y,u/n),V=z._x=(Y-H/$)/2,j=z._y=(n-u/$)/2;if(0!==a.width&&0!==a.height||z.hasRetry||(I.callLater(z.iv,z,g),z.hasRetry=!0),(Y!==s.clientWidth||n!==s.clientHeight)&&(F.setCanvas(s,Y,n),P=1),F.isSameRect(p,z._scrollRect)||(z._scrollRect=p,P=1),P){var Q=F.initContext(s),l=E.getDataModel(),X=l.getBackground()||z._contentBackground,q=z._contentBorderColor,_=I.devicePixelRatio;Q.clearRect(0,0,Y*_,n*_);var i=l.getBackground()&&l.a("width")>0&&l.a("height")>0;X&&!i&&F.fillRect(Q,V*_,j*_,H/$*_,u/$*_,X),F.translateAndScale(Q,-m/$+V,-k/$+j,1/$),E._42(Q),Q.restore(),q&&F.drawBorder(Q,q,V*_,j*_,H/$*_,u/$*_)}o.background=z._maskBackground,o.left=V+(a.x-m)/$+c,o.top=j+(a.y-k)/$+c,o.width=a.width/$+c,o.height=a.height/$+c,z._redraw=null}else if(P){var Q=F.initContext(s);Q.clearRect(0,0,Y,n),Q.restore(),z._redraw=null}},center:function(j){var h=this,T=h.gv;if(T){var f=T._zoom,W=T._29I,Z=h._rate,X=h._scrollRect,g=I.getLogicalPoint(j,h._canvas),C=X.x+(g.x-h._x)*Z,G=X.y+(g.y-h._y)*Z;T.setTranslate((W.width/2-C)*f,(W.height/2-G)*f)}},handle_mousedown:function(H){this.handle_touchstart(H)},handleWindowMouseUp:function(i){this.handleWindowTouchEnd(i)},handleWindowMouseMove:function(L){this.handleWindowTouchMove(L)},handle_mousewheel:function(_){this.handleScroll(_,_.wheelDelta)},handle_DOMMouseScroll:function(J){2===J.axis&&this.handleScroll(J,-J.detail)},handleScroll:function(T,Y){if(A(T),this.gv){var d=this.gv;Y>0?d.scrollZoomIn():0>Y&&d.scrollZoomOut()}},handle_touchstart:function(Q){if(A(Q),this.gv&&I.isLeftButton(Q)){var q=this,J=q.gv,r=p(Q);1===r?I.isDoubleClick(Q)&&J.isResettable()?J.reset():(q.center(Q),x(q,Q)):2===r&&(q._dist=y(Q),x(q,Q))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(H){if(this.gv){var K=this,d=K._dist,m=p(H);1===m?K.center(H):2===m&&d!=g&&K.gv.handlePinch(g,y(H),d)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);